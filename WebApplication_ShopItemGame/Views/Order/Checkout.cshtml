@model List<WebApplication_ShopItemGame.Models.CartItem>

@{
    ViewData["Title"] = "Checkout";
}

<div class="container-fluid p-0 ">
    <div class="container-sm  m-cent  p-0 pt-0 ">
        <div class="container-sm ">
            <div class="container-fluid">

                <center>
                    <div class="col-12 col-lg-12 bg-white shadow p-2" style="border-radius: 1vh;">
                        <div class="d-flex justify-content-between">
                            <div class="text-center text-lg-start">
                                <h3 class="text-white m-0" style="padding: 5px 10px; background-color:  #2c3e6e; border-radius: 1vh; width: fit-content;">
                                    <i class="fa-solid fa-money-check-dollar fa-flip" style="--fa-animation-duration: 3s;"></i> Checkout
                                </h3>
                            </div>
                            <a asp-controller="Cart" asp-action="Index" class="btn btn-outline-warning align-self-end pe-4 ps-4 pt-2 pb-2 d-none d-lg-block" style="height: fit-content;">
                                <b><i class="fa-regular fa-circle-left"></i> ย้อนกลับ</b>
                            </a>
                        </div>
                    </div>
                </center>

                <table class="table align-middle table-borderless custom-table">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Price (per item)</th>
                            <th>Quantity</th>
                            <th>Subtotal</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            decimal total = 0;
                        }
                        @foreach (var item in Model)
                        {
                            var subtotal = item.Product.Price * item.Quantity;
                            total += subtotal;
                            <tr>
                                <td>@item.Product.Name</td>
                                <td>@item.Product.Price.ToString("C")</td>
                                <td>@item.Quantity</td>
                                <td>@subtotal.ToString("C")</td>
                            </tr>
                        }
                    </tbody>
     
                    <tfoot>
                        <tr>
                            <td colspan="3" class="text-end ">ยอดรวมทั้งหมด:</td>
                            <td class="text-center">@total.ToString("C")</td>
                        </tr>
                    </tfoot>

                </table>

                <form asp-action="PlaceOrder" method="post">
                    <button type="submit" class="btn btn-success">Confirm Purchase</button>
                </form>

            </div>
        </div>
    </div>
</div>

